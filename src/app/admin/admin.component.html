<nav class="navbar navbar-inverse navbar-fixed-top">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" [routerLink]="['/public']">{{title}}</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav navbar-right">
        <li *ngIf="(authService.user | async)"><a [routerLink]="['/admin']">Meine Rezepte</a></li>
        <li><a [routerLink]="['/public']">Start</a></li>
        <li><a [routerLink]="['/register']">Registrieren</a></li>
        <li><a href="#">Über uns</a></li>
        <li><a href="#">Kontakt</a></li>
      </ul>
    </div>
  </div>
</nav>

<div class="container-fluid">
  <div class="row">

    <div class="col-sm-3 col-md-2 sidebar">

      <div class="form-group welcome" *ngIf="authService.user | async">
        <p>Willkommen {{ (authService.user | async)?.email }}!</p>
        <a class="logout" (click)="logout()" *ngIf="authService.user | async">
          <i class="flaticon-logout"></i> Abmelden
        </a>
      </div>

      <div *ngIf="!(authService.user | async)">
        <div class="form-group">
          <label for="inputEmail">E-Mail</label>
          <input type="text" class="form-control" id="inputEmail" [(ngModel)]="email" placeholder="E-Mail">
        </div>
        <div class="form-group">
          <label for="inputPassword">Passwort</label>
          <input type="password" class="form-control" id="inputPassword" [(ngModel)]="password" placeholder="Passwort">
        </div>
        <button type="button" class="btn btn-default" (click)="login()" [disabled]="!email || !password">
          <i class="fa fa-sign-in"></i> Anmelden
        </button>
      </div>

      <ul *ngIf="(authService.user | async)" class="nav nav-sidebar">
        <li [routerLinkActive]="['active']"><a [routerLink]="['/admin/recipes']">
          <i class="icon flaticon-recipes"></i>Meine Rezepte
          <span class="sr-only">(Aktuell)</span>
        </a>
        </li>
        <li [routerLinkActive]="['active']">
          <a [routerLink]="['/admin/recipe-add']">
            <i class="icon flaticon-add"></i>Neues Rezept
          </a>
        </li>
      </ul>
      <ul *ngIf="(authService.user | async)" class="nav nav-sidebar">
        <li [routerLinkActive]="['active']">
          <a [routerLink]="['/admin/basis-data-category']">
            <i class="icon flaticon-category"></i>Kategorie
          </a>
        </li>
        <li [routerLinkActive]="['active']">
          <a [routerLink]="['/admin/basis-data-cuisine']">
            <i class="icon flaticon-cuisine"></i>Länderküche
          </a>
        </li>
        <li [routerLinkActive]="['active']">
          <a [routerLink]="['/admin/basis-data-difficulty']">
            <i class="icon flaticon-level"></i>Schwierigkeitsgrad
          </a>
        </li>
      </ul>
      <ul *ngIf="(authService.user | async)" class="nav nav-sidebar">
        <li [routerLinkActive]="['active']">
          <a [routerLink]="['/admin/crisis-center']">
            <i class="icon flaticon-maintenance"></i>Wartungsarbeiten
          </a>
        </li>
      </ul>
      <!--<ul *ngIf="(authService.user | async) && role === 'admin'" class="nav nav-sidebar">-->
      <ul *ngIf="(authService.user | async)" class="nav nav-sidebar">
        <li [routerLinkActive]="['active']">
          <a [routerLink]="['/admin/users']">
            <i class="icon flaticon-maintenance"></i>Benutzer
          </a>
        </li>
      </ul>
    </div>

    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">

      <!-- TODO: Check the Styling - no style should be used in the tag -->
      <router-outlet style="padding-top: 40px" *ngIf="authService.user | async"></router-outlet>
    </div>
  </div>
</div>

<div *ngFor="let alert of alerts">
  <alert [type]="alert.type" [dismissOnTimeout]="alert.timeout" dismissible="true" style="position: fixed; top: 20px; right: 20px; z-index: 1040;">
    <h4 class="alert-heading">
      Info
    </h4>
    <p>
      {{ alert.msg }}
    </p>
  </alert>
</div>
